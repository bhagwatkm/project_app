<%= form_with(model: [@organization, user_organization], class: "max-w-md mx-auto bg-white shadow-lg rounded-lg p-8") do |form| %>
  <% if user_organization.errors.any? %>
    <div class="mb-6 p-4 rounded bg-red-100 text-red-800 border border-red-200">
      <h2 class="font-semibold mb-2"><%= pluralize(user_organization.errors.count, "error") %> prohibited this user organization from being saved:</h2>
      <ul class="list-disc list-inside">
        <% user_organization.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-4">
    <%= form.label :user_id, class: "block mb-1 font-medium text-gray-700" %>
<%= form.select :user_id,  options_from_collection_for_select(@available_users, :id, :email, form.object.user_id),
  { prompt: "Choose a user..." },
  { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" }
%>  </div>

 
<div class="mb-4">
  <%= form.label :role, class: "block mb-1 font-medium text-gray-700" %>
  <%= form.select :role,
    options_for_select(
      [
        ['Admin', 'admin'],
        ['Member', 'member'],
        ['Viewer', 'viewer']
      ],
      form.object.role || 'member'
    ),
    { prompt: "Choose a role..." },
    { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" }
  %>

  <p class="mt-1 text-sm text-gray-500">
    <strong>Admin:</strong> Full access to manage organization and all projects<br>
    <strong>Member:</strong> Can create and manage projects<br>
    <strong>Viewer:</strong> Read-only access to projects
  </p>
</div>

  <div>
    <%= form.submit "Save", class: "w-full py-2 px-4 rounded text-white font-medium bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500" %>
  </div>
<% end %>